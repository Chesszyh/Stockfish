# Transform (转换)

`transform` 命令提供了一系列子命令，用于对数据执行特定的转换。调用语法为 `transform <subcommand>`。下面列出并描述了当前已实现的子命令。

## `nudged_static`

`transform nudged_static` 接受命名参数（格式为 `transform nudged_static 参数1名 参数1值 ...`）和无需值的标志参数。

此命令会遍历输入文件中的局面，并用新的评估值替换旧的评估值。新的评估值由静态评估生成，但会根据原始输入文件中的评估值进行微调。

目前可用的选项如下：

`input_file` - 输入文件的路径。支持 bin 和 binpack 格式。默认值：in.binpack。

`output_file` - 输出文件的路径。支持 bin 和 binpack 格式。默认值：out.binpack。

`absolute` - 声明调整值应受限于一个绝对值。此标记后跟最大绝对调整值。评估值总是朝着输入文件中的分数方向进行调整。这是默认模式。默认最大调整值：5。

`relative` - 声明调整值应受限于一个与静态评价值大小相关的相对值。此标记后跟最大相对变化量——一个大于 0 的浮点数。例如，值 0.1 表示只允许将静态评价值朝输入文件分数的方向改变最多 10%。

`interpolate` - 声明输出分数应该是静态评价值和输入文件分数之间的插值。此标记后跟插值常数 `t`。`t` 为 0 意味着只使用静态评价值。`t` 为 1 意味着只使用输入文件的分数。`t` 为 0.5 意味着对静态评价值和输入分数取平均值。它也接受 `<0, 1>` 范围之外的值，但其实用性值得怀疑。

## `rescore`

`transform rescore` 接受命名参数（格式为 `transform rescore 参数1名 参数1值 ...`）和无需值的标志参数。

此工具会遵循 UCI 选项 `Threads` 并使用所有可用的线程。

此命令接受一个输入文件路径，该文件可以是每行包含一个 FEN 的 .epd 文件，也可以是 .bin 或 .binpack 文件。它会输出一个 .bin 或 .binpack 文件，其中包含用指定深度搜索重新评估过的局面。

目前可用的选项如下：

`input_file` - 输入文件的路径。默认值：in.binpack。

`output_file` - 输出的 .bin 或 .binpack 文件的路径。文件以追加模式打开。默认值：out.binpack。

`depth` - 用于重新评估的搜索深度。默认值：3。

`keep_moves` - 是否保留输入文件中的着法（如果可用）。允许在 .binpack 文件中保持压缩。默认值：1。

`research_count` - 在使用评估值之前，对同一局面额外执行的 N 深度搜索次数。默认值：0。
